dex:
  enabled: true

notifications:
  enabled: false

global:
  domain: "argocd.pynenborg.com"

configs:
  secret:
    extra:
      dex.authentik.clientSecret: ${authentikClientSecret}
  repositories:
    "github":
      url: "git@github.com:CelPyn/infra.git"
      type: git
      sshPrivateKey: |
        ${sshPrivateKey}
  params:
    server.insecure: true
  cm:
    admin.enabled: false
    dex.config: |
      connectors:
        - type: oidc
          id: authentik
          name: Authentik
          config:
            issuer: "https://auth.pynenborg.com/application/o/argo-cd/"
            clientID: "utR2KcwwEEce91AJF4r7aytnftqQHH2xB2vQ7i8S"
            clientSecret: "$dex.authentik.clientSecret"
            insecureEnableGroups: true
            scopes:
              - "openid"
              - "profile"
              - "email"
  rbac:
    policy.csv: |
      g, ArgoCD Admins, role:admin
      g, ArgoCD Viewers, role:readonly
